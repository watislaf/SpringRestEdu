version: '3'


services:
  psql:
    image: 'bitnami/postgresql:latest'
    env_file:
      - app-data/database.env # configure postgres. Password etc
    volumes:
      - /docker-entrypoint-initdb.d

# psql -h psql -p 5432 -U test -d database

#  webapp:
#    image: 'webapp'
#
#    volumes:
#      - '.:/app-web'
#      - '/app-web/node_modules'
#    ports:
#      - 3001:3000
#    environment:
#      - CHOKIDAR_USEPOLLING=true

  apiapp:
    image: 'apiapp'
    links:
      - psql # app see psql, psql is domain now
    ports:
      - "8095"

#  nginx:
#    image: nginx
#    volumes:
#      - ./templates:/etc/nginx/templates
#    ports:
#      - "8080:80"
#    environment:
#      - NGINX_HOST=gigglingpenguin.me
#      - NGINX_PORT=80

